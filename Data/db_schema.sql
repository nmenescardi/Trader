
DROP DATABASE IF EXISTS trader;

CREATE DATABASE IF NOT EXISTS trader;
USE trader;

CREATE TABLE IF NOT EXISTS stocks (
	stock_id INT AUTO_INCREMENT PRIMARY KEY,
	ticker VARCHAR(20) NOT NULL,
	company VARCHAR(255) NULL DEFAULT NULL,
	exchanger VARCHAR(20) NULL DEFAULT NULL,
	description VARCHAR(255),
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP()
);

CREATE TABLE IF NOT EXISTS etoro_stocks (
	etoro_stock_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	ticker VARCHAR(20) NOT NULL,
	company VARCHAR(255) NULL DEFAULT NULL,
	exchanger VARCHAR(20) NULL DEFAULT NULL,
	url VARCHAR(255) NULL DEFAULT NULL,
	is_manual_tp BOOLEAN NOT NULL DEFAULT FALSE,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id)
);

CREATE TABLE IF NOT EXISTS lists (
	list_id INT AUTO_INCREMENT PRIMARY KEY,
	title VARCHAR(255) NOT NULL,
	description VARCHAR(255) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP()
);

CREATE TABLE IF NOT EXISTS stock_list (
	stock_id INT,
	list_id INT,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id),
	FOREIGN KEY (list_id) REFERENCES lists (list_id),
	PRIMARY KEY (stock_id, list_id)
);

CREATE TABLE IF NOT EXISTS stock_prices (
	stock_price_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	open_price DECIMAL(11,6) NULL DEFAULT NULL,
	high_price DECIMAL(11,6) NULL DEFAULT NULL,
	low_price DECIMAL(11,6) NULL DEFAULT NULL,
	close_price DECIMAL(11,6) NULL DEFAULT NULL,
	volume BIGINT(20) NULL DEFAULT NULL,
	timeframe VARCHAR(5) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id)
);

















