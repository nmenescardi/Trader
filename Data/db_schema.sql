
-- DROP DATABASE IF EXISTS trader;

CREATE DATABASE IF NOT EXISTS trader;
USE trader;


CREATE TABLE IF NOT EXISTS stocks (
	stock_id INT AUTO_INCREMENT PRIMARY KEY,
	ticker VARCHAR(20) NOT NULL,
	company VARCHAR(255) NULL DEFAULT NULL,
	exchanger VARCHAR(20) NULL DEFAULT NULL,
	description VARCHAR(255),
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	UNIQUE KEY stocks_ticker_company (ticker, exchanger)
);


CREATE TABLE IF NOT EXISTS etoro_stocks (
	etoro_stock_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	ticker VARCHAR(20) NOT NULL,
	company VARCHAR(255) NULL DEFAULT NULL,
	exchanger VARCHAR(20) NULL DEFAULT NULL,
	url VARCHAR(255) NULL DEFAULT NULL,
	is_manual_tp BOOLEAN NOT NULL DEFAULT FALSE,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id)
);


CREATE TABLE IF NOT EXISTS indicators (
	indicator_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	indicator_key VARCHAR(255) NOT NULL,
	indicator_value VARCHAR(255) NULL DEFAULT NULL,
	main_timeframe VARCHAR(5) NULL DEFAULT NULL,
	date_time DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	UNIQUE KEY indicators_single_value (stock_id, indicator_key, main_timeframe, date_time),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id)
);


CREATE TABLE IF NOT EXISTS lists (
	list_id INT AUTO_INCREMENT PRIMARY KEY,
	title VARCHAR(255) NOT NULL,
	description VARCHAR(255) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	UNIQUE KEY lists_single_title (title)
);


CREATE TABLE IF NOT EXISTS stock_list (
	stock_id INT,
	list_id INT,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id),
	FOREIGN KEY (list_id) REFERENCES lists (list_id),
	UNIQUE KEY stock_list_single_row (stock_id, list_id)
);


CREATE TABLE IF NOT EXISTS stock_prices (
	stock_price_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	time_price DATETIME NOT NULL,
	open_price DECIMAL(11,4) NULL DEFAULT NULL,
	high_price DECIMAL(11,4) NULL DEFAULT NULL,
	low_price DECIMAL(11,4) NULL DEFAULT NULL,
	close_price DECIMAL(11,4) NULL DEFAULT NULL,
	volume INT NULL DEFAULT NULL,
	timeframe VARCHAR(5) NULL DEFAULT "5m",
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	UNIQUE KEY historical_price_stock_time (stock_id, time_price, timeframe),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id)
);


CREATE TABLE IF NOT EXISTS strategies (
	strategy_id INT AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(100) NULL DEFAULT NULL,
	version VARCHAR(10) NULL DEFAULT NULL,
	type VARCHAR(100) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	UNIQUE KEY strategies_name_version (name, version)
);


CREATE TABLE IF NOT EXISTS backtest_schedules (
	backtest_schedule_id INT AUTO_INCREMENT PRIMARY KEY,
	list_id INT NULL DEFAULT NULL,
	strategy_id INT,
	from_date DATETIME NOT NULL,
	to_date DATETIME NULL DEFAULT NULL,
	timeframe VARCHAR(5) NULL DEFAULT NULL,
	frecuency VARCHAR(5) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (list_id) REFERENCES lists (list_id),
	FOREIGN KEY (strategy_id) REFERENCES strategies (strategy_id)
);


CREATE TABLE IF NOT EXISTS backtest_reports (
	backtest_report_id INT AUTO_INCREMENT PRIMARY KEY,
	stock_id INT,
	backtest_schedule_id INT NULL DEFAULT NULL,
	strategy_id INT,
	from_date DATETIME NOT NULL,
	to_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	main_timeframe VARCHAR(5) NULL DEFAULT NULL,
	tag VARCHAR(100) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (stock_id) REFERENCES stocks (stock_id),
	FOREIGN KEY (backtest_schedule_id) REFERENCES backtest_schedules (backtest_schedule_id),
	FOREIGN KEY (strategy_id) REFERENCES strategies (strategy_id)
);


CREATE TABLE IF NOT EXISTS report_meta (
	report_meta_id INT AUTO_INCREMENT PRIMARY KEY,
	backtest_report_id INT,
	meta_key VARCHAR(255) NOT NULL,
	meta_value VARCHAR(255) NULL DEFAULT NULL,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	FOREIGN KEY (backtest_report_id) REFERENCES backtest_reports (backtest_report_id)
);


CREATE TABLE IF NOT EXISTS general_config (
	last_portfolio_positions_update DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	should_reset BOOLEAN NOT NULL DEFAULT FALSE,
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP()
);

CREATE TABLE IF NOT EXISTS alphaventage_jobs (
	job_id INT AUTO_INCREMENT PRIMARY KEY,
	ticker VARCHAR(20) NOT NULL,
	data_month VARCHAR(20) NOT NULL,
	data_year VARCHAR(20) NOT NULL,
	attempts TINYINT NOT NULL DEFAULT 0,
	created_date DATETIME NULL DEFAULT CURRENT_TIMESTAMP(),
	last_updated DATETIME NULL DEFAULT CURRENT_TIMESTAMP() ON UPDATE CURRENT_TIMESTAMP(),
	deleted BOOLEAN NOT NULL DEFAULT 0
);


-- *********************************
-- Insert Default Values
-- *********************************

-- Some pass value to force checking the portfolio amount
INSERT INTO general_config (last_portfolio_positions_update)
SELECT subdate(CURRENT_DATE, 5) FROM DUAL
WHERE NOT EXISTS (SELECT * FROM general_config);


INSERT IGNORE INTO stocks 
	(ticker, exchanger)
VALUES
	('AAPL','NASDAQ'),
	('AAL','NASDAQ'),
	('TSLA','NASDAQ'),
	('AMD','NASDAQ'),
	('UAL','NASDAQ'),
	('BBBY','NASDAQ'),
	('MSFT','NASDAQ'),
	('SIRI','NASDAQ'),
	('PTON','NASDAQ'),
	('INTC','NASDAQ'),
	('CSCO','NASDAQ'),
	('ETFC','NASDAQ'),
	('MU','NASDAQ'),
	('CMCSA','NASDAQ'),
	('FB','NASDAQ'),
	('NVDA','NASDAQ'),
	('MIK','NASDAQ'),
	('MAT','NASDAQ'),
	('JBLU','NASDAQ'),
	('HBAN','NASDAQ'),
	('CZR','NASDAQ'),
	('RUN','NASDAQ'),
	('ATVI','NASDAQ'),
	('MRNA','NASDAQ'),
	('GILD','NASDAQ'),
	('ROKU','NASDAQ'),
	('AMTD','NASDAQ'),
	('OSTK','NASDAQ'),
	('SPWR','NASDAQ'),
	('AMAT','NASDAQ'),
	('ON','NASDAQ'),
	('PENN','NASDAQ'),
	('AGNC','NASDAQ'),
	('LYFT','NASDAQ'),
	('PYPL','NASDAQ'),
	('CODX','NASDAQ'),
	('FITB','NASDAQ'),
	('MDLZ','NASDAQ'),
	('MRVL','NASDAQ'),
	('NFLX','NASDAQ'),
	('PDD','NASDAQ'),
	('QCOM','NASDAQ'),
	('AMZN','NASDAQ'),
	('SBUX','NASDAQ'),
	('EBAY','NASDAQ'),
	('KHC','NASDAQ'),
	('DOCU','NASDAQ'),
	('PEP','NASDAQ'),
	('NLOK','NASDAQ'),
	('TLRY','NASDAQ'),
	('MYL','NASDAQ'),
	('ENPH','NASDAQ'),
	('MOMO','NASDAQ'),
	('TMUS','NASDAQ'),
	('TXN','NASDAQ'),
	('UNIT','NASDAQ'),
	('ETSY','NASDAQ'),
	('BLDP','NASDAQ'),
	('FAST','NASDAQ'),
	('FANG','NASDAQ'),
	('LBTYK','NASDAQ'),
	('CSX','NASDAQ'),
	('QRTEA','NASDAQ'),
	('CRWD','NASDAQ'),
	('IMMU','NASDAQ'),
	('PLAY','NASDAQ'),
	('DBX','NASDAQ'),
	('FISV','NASDAQ'),
	('ADI','NASDAQ'),
	('GT','NASDAQ'),
	('VOD','NASDAQ'),
	('BYND','NASDAQ'),
	('COMM','NASDAQ'),
	('CRBP','NASDAQ'),
	('ADBE','NASDAQ'),
	('NVAX','NASDAQ'),
	('FEYE','NASDAQ'),
	('BLDR','NASDAQ'),
	('DISCA','NASDAQ'),
	('BMRN','NASDAQ'),
	('MXIM','NASDAQ'),
	('AMGN','NASDAQ'),
	('BPY','NASDAQ'),
	('NAVI','NASDAQ'),
	('CTSH','NASDAQ'),
	('EXAS','NASDAQ'),
	('CRON','NASDAQ'),
	('SFIX','NASDAQ'),
	('JFU','NASDAQ'),
	('DISH','NASDAQ'),
	('ADP','NASDAQ'),
	('MAR','NASDAQ'),
	('TRIP','NASDAQ'),
	('NXPI','NASDAQ'),
	('COST','NASDAQ'),
	('SWBI','NASDAQ'),
	('BIDU','NASDAQ'),
	('LBTYA','NASDAQ'),
	('ALXN','NASDAQ'),
	('STNE','NASDAQ'),
	('MNST','NASDAQ'),
	('BLMN','NASDAQ'),
	('SPLK','NASDAQ'),
	('NUAN','NASDAQ'),
	('FLEX','NASDAQ'),
	('SBRA','NASDAQ'),
	('BILI','NASDAQ'),
	('ROST','NASDAQ'),
	('CSIQ','NASDAQ'),
	('CAR','NASDAQ'),
	('EXPE','NASDAQ'),
	('NTAP','NASDAQ'),
	('SFM','NASDAQ'),
	('LULU','NASDAQ'),
	('URBN','NASDAQ'),
	('NWL','NASDAQ'),
	('IONS','NASDAQ'),
	('DLTR','NASDAQ'),
	('NTNX','NASDAQ'),
	('EXEL','NASDAQ'),
	('VIAV','NASDAQ'),
	('STLD','NASDAQ'),
	('EA','NASDAQ'),
	('STX','NASDAQ'),
	('LKQ','NASDAQ'),
	('AVGO','NASDAQ'),
	('TEAM','NASDAQ'),
	('MCHP','NASDAQ'),
	('MTCH','NASDAQ'),
	('PAYX','NASDAQ'),
	('SWKS','NASDAQ'),
	('ILMN','NASDAQ'),
	('SGMO','NASDAQ'),
	('NWSA','NASDAQ'),
	('CROX','NASDAQ'),
	('SUMO','NASDAQ'),
	('LITE','NASDAQ'),
	('TTD','NASDAQ'),
	('CDNS','NASDAQ'),
	('FSLR','NASDAQ'),
	('CHRS','NASDAQ'),
	('DXCM','NASDAQ'),
	('SEDG','NASDAQ'),
	('TROW','NASDAQ'),
	('GOOG','NASDAQ'),
	('INCY','NASDAQ'),
	('TTWO','NASDAQ'),
	('ADSK','NASDAQ'),
	('HSIC','NASDAQ'),
	('CHRW','NASDAQ'),
	('REGN','NASDAQ'),
	('GLPI','NASDAQ'),
	('REG','NASDAQ'),
	('LRCX','NASDAQ'),
	('PDCE','NASDAQ'),
	('FTNT','NASDAQ'),
	('OKTA','NASDAQ'),
	('CME','NASDAQ'),
	('CDW','NASDAQ'),
	('PS','NASDAQ'),
	('GPRO','NASDAQ'),
	('ISBC','NASDAQ'),
	('GNTX','NASDAQ'),
	('KLAC','NASDAQ'),
	('HOLX','NASDAQ'),
	('JBHT','NASDAQ'),
	('QTT','NASDAQ'),
	('CHTR','NASDAQ'),
	('ACAD','NASDAQ'),
	('PCAR','NASDAQ'),
	('CERN','NASDAQ'),
	('ARWR','NASDAQ'),
	('HDS','NASDAQ'),
	('EHTH','NASDAQ'),
	('NBIX','NASDAQ'),
	('BIIB','NASDAQ'),
	('CPRT','NASDAQ'),
	('ULTA','NASDAQ'),
	('TSCO','NASDAQ'),
	('JACK','NASDAQ'),
	('SSNC','NASDAQ'),
	('FLIR','NASDAQ'),
	('AKAM','NASDAQ'),
	('ACIA','NASDAQ'),
	('INTU','NASDAQ'),
	('FROG','NASDAQ'),
	('PPC','NASDAQ'),
	('DENN','NASDAQ'),
	('QRVO','NASDAQ'),
	('COUP','NASDAQ'),
	('CHKP','NASDAQ'),
	('EXPD','NASDAQ'),
	('BLUE','NASDAQ'),
	('HAS','NASDAQ'),
	('PFG','NASDAQ'),
	('TXRH','NASDAQ'),
	('NIU','NASDAQ'),
	('CTXS','NASDAQ'),
	('DNKN','NASDAQ'),
	('CREE','NASDAQ'),
	('SNPS','NASDAQ'),
	('SGEN','NASDAQ'),
	('OLLI','NASDAQ'),
	('AVT','NASDAQ'),
	('EDIT','NASDAQ'),
	('IBKR','NASDAQ'),
	('POOL','NASDAQ'),
	('IIVI','NASDAQ'),
	('MDB','NASDAQ'),
	('PFPT','NASDAQ'),
	('GH','NASDAQ'),
	('ASML','NASDAQ'),
	('IAC','NASDAQ'),
	('NVCR','NASDAQ'),
	('CRUS','NASDAQ'),
	('PTC','NASDAQ'),
	('LAMR','NASDAQ'),
	('SBAC','NASDAQ'),
	('SRPT','NASDAQ'),
	('HQY','NASDAQ'),
	('TRMB','NASDAQ'),
	('FIVE','NASDAQ'),
	('FOSL','NASDAQ'),
	('PDCO','NASDAQ'),
	('BZUN','NASDAQ'),
	('LSXMA','NASDAQ'),
	('VRSK','NASDAQ'),
	('ODFL','NASDAQ'),
	('BHF','NASDAQ'),
	('TNDM','NASDAQ'),
	('EVBG','NASDAQ'),
	('NTRA','NASDAQ'),
	('RGEN','NASDAQ'),
	('PZZA','NASDAQ'),
	('ALGN','NASDAQ'),
	('NATI','NASDAQ'),
	('ISRG','NASDAQ'),
	('HTHT','NASDAQ'),
	('VC','NASDAQ'),
	('FLWS','NASDAQ'),
	('HAIN','NASDAQ'),
	('NTLA','NASDAQ'),
	('NTRS','NASDAQ'),
	('IRBT','NASDAQ'),
	('GRMN','NASDAQ'),
	('CINF','NASDAQ'),
	('LPSN','NASDAQ'),
	('NUVA','NASDAQ'),
	('KTOS','NASDAQ'),
	('PRAH','NASDAQ'),
	('AAXN','NASDAQ'),
	('FFIV','NASDAQ'),
	('CARA','NASDAQ'),
	('CTAS','NASDAQ'),
	('SBNY','NASDAQ'),
	('JAZZ','NASDAQ'),
	('AMBA','NASDAQ'),
	('ODP','NASDAQ'),
	('EQIX','NASDAQ'),
	('CYBR','NASDAQ'),
	('ABMD','NASDAQ'),
	('CBRL','NASDAQ'),
	('ORBC','NASDAQ'),
	('PBYI','NASDAQ'),
	('SYNA','NASDAQ'),
	('TACO','NASDAQ'),
	('MELI','NASDAQ'),
	('ANSS','NASDAQ'),
	('ATNX','NASDAQ'),
	('SEIC','NASDAQ'),
	('RYAAY','NASDAQ'),
	('GWPH','NASDAQ'),
	('LILA','NASDAQ'),
	('BRKR','NASDAQ'),
	('ORLY','NASDAQ'),
	('JKHY','NASDAQ'),
	('BPMC','NASDAQ'),
	('CSOD','NASDAQ'),
	('CLMT','NASDAQ'),
	('INGN','NASDAQ'),
	('AVID','NASDAQ'),
	('BEAT','NASDAQ'),
	('STMP','NASDAQ'),
	('IDXX','NASDAQ'),
	('ABCB','NASDAQ'),
	('SAGE','NASDAQ'),
	('ICPT','NASDAQ'),
	('GOSS','NASDAQ'),
	('SPTN','NASDAQ'),
	('AZPN','NASDAQ'),
	('QFIN','NASDAQ'),
	('MASI','NASDAQ'),
	('BKNG','NASDAQ'),
	('SMTC','NASDAQ'),
	('MRTX','NASDAQ'),
	('POWI','NASDAQ'),
	('SLGN','NASDAQ'),
	('CSGP','NASDAQ'),
	('SANM','NASDAQ'),
	('IRTC','NASDAQ'),
	('SRCL','NASDAQ'),
	('FRPT','NASDAQ'),
	('IDCC','NASDAQ'),
	('SIVB','NASDAQ'),
	('SLAB','NASDAQ'),
	('CACC','NASDAQ'),
	('AXGN','NASDAQ'),
	('VCYT','NASDAQ'),
	('EEFT','NASDAQ'),
	('CLLS','NASDAQ'),
	('PODD','NASDAQ'),
	('PI','NASDAQ'),
	('ALRM','NASDAQ'),
	('OLED','NASDAQ'),
	('AMED','NASDAQ'),
	('ANDE','NASDAQ'),
	('AVAV','NASDAQ'),
	('CASY','NASDAQ'),
	('MRCY','NASDAQ'),
	('MKTX','NASDAQ'),
	('CHDN','NASDAQ'),
	('SAFM','NASDAQ'),
	('TECH','NASDAQ'),
	('TA','NASDAQ'),
	('CORE','NASDAQ'),
	('IPGP','NASDAQ'),
	('RETA','NASDAQ'),
	('CAMP','NASDAQ'),
	('QIWI','NASDAQ'),
	('JOUT','NASDAQ'),
	('CEVA','NASDAQ'),
	('FWONA','NASDAQ'),
	('MMYT','NASDAQ'),
	('UEIC','NASDAQ'),
	('TREE','NASDAQ'),
	('IEP','NASDAQ'),
	('SNEX','NASDAQ'),
	('CBPO', 'NASDAQ')
;

INSERT IGNORE INTO stocks 
	(ticker, exchanger)
VALUES
	('A','NYSE'),
	('AA','NYSE'),
	('AAN','NYSE'),
	('AAP','NYSE'),
	('ABBV','NYSE'),
	('ABC','NYSE'),
	('ABEV','NYSE'),
	('ABG','NYSE'),
	('ABM','NYSE'),
	('ABT','NYSE'),
	('ACB','NYSE'),
	('ACM','NYSE'),
	('ACN','NYSE'),
	('ADM','NYSE'),
	('ADS','NYSE'),
	('ADT','NYSE'),
	('AEE','NYSE'),
	('AEO','NYSE'),
	('AES','NYSE'),
	('AFG','NYSE'),
	('AFL','NYSE'),
	('AGCO','NYSE'),
	('AGRO','NYSE'),
	('AIG','NYSE'),
	('AIN','NYSE'),
	('AIZ','NYSE'),
	('AJG','NYSE'),
	('ALB','NYSE'),
	('ALK','NYSE'),
	('ALL','NYSE'),
	('ALLE','NYSE'),
	('ALLY','NYSE'),
	('AME','NYSE'),
	('AMG','NYSE'),
	('AMP','NYSE'),
	('AMT','NYSE'),
	('AMWL','NYSE'),
	('AMX','NYSE'),
	('AN','NYSE'),
	('ANET','NYSE'),
	('ANF','NYSE'),
	('ANTM','NYSE'),
	('AON','NYSE'),
	('APD','NYSE'),
	('APH','NYSE'),
	('APRN','NYSE'),
	('APTV','NYSE'),
	('ARCH','NYSE'),
	('ARE','NYSE'),
	('ARGO','NYSE'),
	('ARMK','NYSE'),
	('ARW','NYSE'),
	('ASAN','NYSE'),
	('ASH','NYSE'),
	('ATGE','NYSE'),
	('ATH','NYSE'),
	('ATI','NYSE'),
	('ATO','NYSE'),
	('ATUS','NYSE'),
	('AVB','NYSE'),
	('AVY','NYSE'),
	('AWK','NYSE'),
	('AXP','NYSE'),
	('AXTA','NYSE'),
	('AYI','NYSE'),
	('AYX','NYSE'),
	('AZO','NYSE'),
	('AZUL','NYSE'),
	('BA','NYSE'),
	('BABA','NYSE'),
	('BAC','NYSE'),
	('BAH','NYSE'),
	('BAX','NYSE'),
	('BB','NYSE'),
	('BBD','NYSE'),
	('BBY','NYSE'),
	('BC','NYSE'),
	('BCO','NYSE'),
	('BDX','NYSE'),
	('BEN','NYSE'),
	('BERY','NYSE'),
	('BFAM','NYSE'),
	('BG','NYSE'),
	('BHC','NYSE'),
	('BHP','NYSE'),
	('BHVN','NYSE'),
	('BIG','NYSE'),
	('BIO','NYSE'),
	('BITA','NYSE'),
	('BJ','NYSE'),
	('BK','NYSE'),
	('BLK','NYSE'),
	('BLL','NYSE'),
	('BMY','NYSE'),
	('BOX','NYSE'),
	('BR','NYSE'),
	('BRFS','NYSE'),
	('BRK.B','NYSE'),
	('BRO','NYSE'),
	('BSAC','NYSE'),
	('BTI','NYSE'),
	('BUD','NYSE'),
	('BURL','NYSE'),
	('BWA','NYSE'),
	('BX','NYSE'),
	('BXP','NYSE'),
	('BXS','NYSE'),
	('BYD','NYSE'),
	('C','NYSE'),
	('CADE','NYSE'),
	('CAG','NYSE'),
	('CAH','NYSE'),
	('CAT','NYSE'),
	('CB','NYSE'),
	('CBRE','NYSE'),
	('CC','NYSE'),
	('CCEP','NYSE'),
	('CCI','NYSE'),
	('CCK','NYSE'),
	('CCL','NYSE'),
	('CCU','NYSE'),
	('CE','NYSE'),
	('CF','NYSE'),
	('CFG','NYSE'),
	('CFX','NYSE'),
	('CGC','NYSE'),
	('CHD','NYSE'),
	('CHE','NYSE'),
	('CHGG','NYSE'),
	('CHL','NYSE'),
	('CHWY','NYSE'),
	('CI','NYSE'),
	('CIEN','NYSE'),
	('CIG','NYSE'),
	('CIT','NYSE'),
	('CL','NYSE'),
	('CLDR','NYSE'),
	('CLR','NYSE'),
	('CLX','NYSE'),
	('CMA','NYSE'),
	('CMC','NYSE'),
	('CMG','NYSE'),
	('CMI','NYSE'),
	('CMS','NYSE'),
	('CNC','NYSE'),
	('CNK','NYSE'),
	('CNO','NYSE'),
	('CNP','NYSE'),
	('CNX','NYSE'),
	('COF','NYSE'),
	('COG','NYSE'),
	('COLD','NYSE'),
	('COO','NYSE'),
	('COP','NYSE'),
	('COTY','NYSE'),
	('CPB','NYSE'),
	('CPE','NYSE'),
	('CPRI','NYSE'),
	('CRI','NYSE'),
	('CRL','NYSE'),
	('CRM','NYSE'),
	('CTLT','NYSE'),
	('CUB','NYSE'),
	('CUBE','NYSE'),
	('CVA','NYSE'),
	('CVNA','NYSE'),
	('CVS','NYSE'),
	('CVX','NYSE'),
	('CX','NYSE'),
	('CXO','NYSE'),
	('CYH','NYSE'),
	('D','NYSE'),
	('DAL','NYSE'),
	('DAN','NYSE'),
	('DAR','NYSE'),
	('DB','NYSE'),
	('DCI','NYSE'),
	('DD','NYSE'),
	('DDD','NYSE'),
	('DDS','NYSE'),
	('DE','NYSE'),
	('DECK','NYSE'),
	('DELL','NYSE'),
	('DFS','NYSE'),
	('DGX','NYSE'),
	('DHI','NYSE'),
	('DHR','NYSE'),
	('DIS','NYSE'),
	('DK','NYSE'),
	('DKS','NYSE'),
	('DLR','NYSE'),
	('DNOW','NYSE'),
	('DOV','NYSE'),
	('DPZ','NYSE'),
	('DRE','NYSE'),
	('DRI','NYSE'),
	('DTE','NYSE'),
	('DUK','NYSE'),
	('DVA','NYSE'),
	('DVN','NYSE'),
	('DXC','NYSE'),
	('EAT','NYSE'),
	('ECL','NYSE'),
	('ED','NYSE'),
	('EDU','NYSE'),
	('EFX','NYSE'),
	('EGHT','NYSE'),
	('EHC','NYSE'),
	('EIX','NYSE'),
	('EL','NYSE'),
	('ELAN','NYSE'),
	('EME','NYSE'),
	('EMN','NYSE'),
	('EMR','NYSE'),
	('ENB','NYSE'),
	('ENR','NYSE'),
	('ENS','NYSE'),
	('EOG','NYSE'),
	('EPC','NYSE'),
	('EPD','NYSE'),
	('EQR','NYSE'),
	('ES','NYSE'),
	('ESNT','NYSE'),
	('ESS','NYSE'),
	('ET','NYSE'),
	('ETN','NYSE'),
	('ETR','NYSE'),
	('EV','NYSE'),
	('EVA','NYSE'),
	('EVRG','NYSE'),
	('EW','NYSE'),
	('EXR','NYSE'),
	('F','NYSE'),
	('FAF','NYSE'),
	('FBHS','NYSE'),
	('FBP','NYSE'),
	('FCPT','NYSE'),
	('FCX','NYSE'),
	('FDS','NYSE'),
	('FDX','NYSE'),
	('FE','NYSE'),
	('FIS','NYSE'),
	('FIT','NYSE'),
	('FL','NYSE'),
	('FLO','NYSE'),
	('FLR','NYSE'),
	('FLS','NYSE'),
	('FLT','NYSE'),
	('FMC','NYSE'),
	('FNF','NYSE'),
	('FRC','NYSE'),
	('FRT','NYSE'),
	('FSLY','NYSE'),
	('FTCH','NYSE'),
	('FTI','NYSE'),
	('FTV','NYSE'),
	('FVRR','NYSE'),
	('GD','NYSE'),
	('GDDY','NYSE'),
	('GE','NYSE'),
	('GEF','NYSE'),
	('GGB','NYSE'),
	('GHC','NYSE'),
	('GIB','NYSE'),
	('GIS','NYSE'),
	('GKOS','NYSE'),
	('GL','NYSE'),
	('GLP','NYSE'),
	('GLW','NYSE'),
	('GM','NYSE'),
	('GME','NYSE'),
	('GNRC','NYSE'),
	('GNW','NYSE'),
	('GOL','NYSE'),
	('GPC','NYSE'),
	('GPI','NYSE'),
	('GPK','NYSE'),
	('GPN','NYSE'),
	('GPS','NYSE'),
	('GRA','NYSE'),
	('GRUB','NYSE'),
	('GS','NYSE'),
	('GWRE','NYSE'),
	('GWW','NYSE'),
	('H','NYSE'),
	('HAE','NYSE'),
	('HAL','NYSE'),
	('HBI','NYSE'),
	('HCA','NYSE'),
	('HD','NYSE'),
	('HEI','NYSE'),
	('HES','NYSE'),
	('HFC','NYSE'),
	('HGV','NYSE'),
	('HIG','NYSE'),
	('HII','NYSE'),
	('HLF','NYSE'),
	('HLT','NYSE'),
	('HMC','NYSE'),
	('HMI','NYSE'),
	('HOG','NYSE'),
	('HON','NYSE'),
	('HPE','NYSE'),
	('HPQ','NYSE'),
	('HRC','NYSE'),
	('HRI','NYSE'),
	('HRL','NYSE'),
	('HSBC','NYSE'),
	('HST','NYSE'),
	('HSY','NYSE'),
	('HTA','NYSE'),
	('HTZ','NYSE'),
	('HUBB','NYSE'),
	('HUBS','NYSE'),
	('HUM','NYSE'),
	('HUN','NYSE'),
	('IBM','NYSE'),
	('IBP','NYSE'),
	('IDA','NYSE'),
	('IEX','NYSE'),
	('IFF','NYSE'),
	('IIPR','NYSE'),
	('INFY','NYSE'),
	('INGR','NYSE'),
	('INSP','NYSE'),
	('INT','NYSE'),
	('IP','NYSE'),
	('IPG','NYSE'),
	('IPHI','NYSE'),
	('IQV','NYSE'),
	('IRM','NYSE'),
	('IT','NYSE'),
	('ITUB','NYSE'),
	('ITW','NYSE'),
	('J','NYSE'),
	('JBL','NYSE'),
	('JBT','NYSE'),
	('JCI','NYSE'),
	('JEF','NYSE'),
	('JLL','NYSE'),
	('JMIA','NYSE'),
	('JNJ','NYSE'),
	('JNPR','NYSE'),
	('JPM','NYSE'),
	('JWN','NYSE'),
	('K','NYSE'),
	('KBH','NYSE'),
	('KBR','NYSE'),
	('KEY','NYSE'),
	('KEYS','NYSE'),
	('KKR','NYSE'),
	('KMB','NYSE'),
	('KMI','NYSE'),
	('KMT','NYSE'),
	('KMX','NYSE'),
	('KNX','NYSE'),
	('KO','NYSE'),
	('KR','NYSE'),
	('KRO','NYSE'),
	('KSS','NYSE'),
	('KSU','NYSE'),
	('L','NYSE'),
	('LAD','NYSE'),
	('LAZ','NYSE'),
	('LB','NYSE'),
	('LDOS','NYSE'),
	('LEA','NYSE'),
	('LEG','NYSE'),
	('LEN','NYSE'),
	('LEVI','NYSE'),
	('LH','NYSE'),
	('LHX','NYSE'),
	('LII','NYSE'),
	('LIN','NYSE'),
	('LLY','NYSE'),
	('LMND','NYSE'),
	('LMT','NYSE'),
	('LNC','NYSE'),
	('LOW','NYSE'),
	('LPX','NYSE'),
	('LSI','NYSE'),
	('LUMN','NYSE'),
	('LUV','NYSE'),
	('LVS','NYSE'),
	('LW','NYSE'),
	('LYB','NYSE'),
	('LYV','NYSE'),
	('M','NYSE'),
	('MA','NYSE'),
	('MAA','NYSE'),
	('MAIN','NYSE'),
	('MAN','NYSE'),
	('MANU','NYSE'),
	('MAS','NYSE'),
	('MCD','NYSE'),
	('MCK','NYSE'),
	('MCO','NYSE'),
	('MD','NYSE'),
	('MDC','NYSE'),
	('MDT','NYSE'),
	('MDU','NYSE'),
	('MET','NYSE'),
	('MGM','NYSE'),
	('MHK','NYSE'),
	('MKC','NYSE'),
	('MKL','NYSE'),
	('MLM','NYSE'),
	('MMC','NYSE'),
	('MMI','NYSE'),
	('MMM','NYSE'),
	('MO','NYSE'),
	('MOH','NYSE'),
	('MOS','NYSE'),
	('MPC','NYSE'),
	('MPW','NYSE'),
	('MRK','NYSE'),
	('MRO','NYSE'),
	('MS','NYSE'),
	('MSCI','NYSE'),
	('MSI','NYSE'),
	('MTB','NYSE'),
	('MTD','NYSE'),
	('MTDR','NYSE'),
	('MTH','NYSE'),
	('MTN','NYSE'),
	('MTOR','NYSE'),
	('MTW','NYSE'),
	('MTZ','NYSE'),
	('MUR','NYSE'),
	('MUSA','NYSE'),
	('MWA','NYSE'),
	('MX','NYSE'),
	('MXL','NYSE'),
	('NAV,NASDAQ:NBL','NYSE'),
	('NCLH','NYSE'),
	('NCR','NYSE'),
	('NEE','NYSE'),
	('NEM','NYSE'),
	('NEP','NYSE'),
	('NEWR','NYSE'),
	('NI','NYSE'),
	('NIO','NYSE'),
	('NKE','NYSE'),
	('NLSN','NYSE'),
	('NLY','NYSE'),
	('NOC','NYSE'),
	('NOK','NYSE'),
	('NOV','NYSE'),
	('NOW','NYSE'),
	('NPTN','NYSE'),
	('NRG','NYSE'),
	('NSC','NYSE'),
	('NSP','NYSE'),
	('NUE','NYSE'),
	('NVR','NYSE'),
	('NVRO','NYSE'),
	('NVS','NYSE'),
	('NVTA','NYSE'),
	('O','NYSE'),
	('OC','NYSE'),
	('OHI','NYSE'),
	('OI','NYSE'),
	('OKE','NYSE'),
	('OLN','NYSE'),
	('OMC','NYSE'),
	('OMI','NYSE'),
	('ORCL','NYSE'),
	('ORI','NYSE'),
	('OSK','NYSE'),
	('OUT','NYSE'),
	('OVV','NYSE'),
	('OXY','NYSE'),
	('PAG','NYSE'),
	('PAGP','NYSE'),
	('PAGS','NYSE'),
	('PAM','NYSE'),
	('PANW','NYSE'),
	('PAYC','NYSE'),
	('PBF','NYSE'),
	('PBR','NYSE'),
	('PBR.A','NYSE'),
	('PCG','NYSE'),
	('PE','NYSE'),
	('PEB','NYSE'),
	('PEG','NYSE'),
	('PEN','NYSE'),
	('PFE','NYSE'),
	('PFGC','NYSE'),
	('PG','NYSE'),
	('PGR','NYSE'),
	('PH','NYSE'),
	('PHM','NYSE'),
	('PII','NYSE'),
	('PINS','NYSE'),
	('PKG','NYSE'),
	('PKI','NYSE'),
	('PLD','NYSE'),
	('PLNT','NYSE'),
	('PLTR','NYSE'),
	('PM','NYSE'),
	('PNC','NYSE'),
	('PNR','NYSE'),
	('POST','NYSE'),
	('PPG','NYSE'),
	('PPL','NYSE'),
	('PRGO','NYSE'),
	('PRU','NYSE'),
	('PSA','NYSE'),
	('PSX','NYSE'),
	('PVH','NYSE'),
	('PWR','NYSE'),
	('PXD','NYSE'),
	('QD','NYSE'),
	('QEP','NYSE'),
	('QSR','NYSE'),
	('QTWO','NYSE'),
	('R','NYSE'),
	('RACE','NYSE'),
	('RAD','NYSE'),
	('RCL','NYSE'),
	('RDN','NYSE'),
	('RDS.A','NYSE'),
	('RDS.B','NYSE'),
	('RE','NYSE'),
	('RENN','NYSE'),
	('REXR','NYSE'),
	('RF','NYSE'),
	('RFP','NYSE'),
	('RGA','NYSE'),
	('RH','NYSE'),
	('RHI','NYSE'),
	('RIG','NYSE'),
	('RIO','NYSE'),
	('RJF','NYSE'),
	('RL','NYSE'),
	('RLGY','NYSE'),
	('RMAX','NYSE'),
	('RMD','NYSE'),
	('RNG','NYSE'),
	('RNR','NYSE'),
	('ROK','NYSE'),
	('ROP','NYSE'),
	('RPM','NYSE'),
	('RRD','NYSE'),
	('RS','NYSE'),
	('RSG','NYSE'),
	('RST','NYSE'),
	('RTX','NYSE'),
	('SAH','NYSE'),
	('SAIL','NYSE'),
	('SAM','NYSE'),
	('SAN','NYSE'),
	('SAVE','NYSE'),
	('SBH','NYSE'),
	('SBS','NYSE'),
	('SCCO','NYSE'),
	('SCHW','NYSE'),
	('SCI','NYSE'),
	('SE','NYSE'),
	('SEAS','NYSE'),
	('SEE','NYSE'),
	('SERV','NYSE'),
	('SHAK','NYSE'),
	('SHOP','NYSE'),
	('SHW','NYSE'),
	('SIG','NYSE'),
	('SIX','NYSE'),
	('SJM','NYSE'),
	('SKM','NYSE'),
	('SKT','NYSE'),
	('SLB','NYSE'),
	('SM','NYSE'),
	('SMAR','NYSE'),
	('SMG','NYSE'),
	('SNAP','NYSE'),
	('SNE','NYSE'),
	('SNOW','NYSE'),
	('SNX','NYSE'),
	('SO','NYSE'),
	('SON','NYSE'),
	('SPB','NYSE'),
	('SPG','NYSE'),
	('SPGI','NYSE'),
	('SPOT','NYSE'),
	('SPR','NYSE'),
	('SQ','NYSE'),
	('SRE','NYSE'),
	('ST','NYSE'),
	('STAG','NYSE'),
	('STE','NYSE'),
	('STOR','NYSE'),
	('STT','NYSE'),
	('STZ','NYSE'),
	('SU','NYSE'),
	('SUI','NYSE'),
	('SUM','NYSE'),
	('SUZ','NYSE'),
	('SWK','NYSE'),
	('SWN','NYSE'),
	('SXT','NYSE'),
	('SYF','NYSE'),
	('SYK','NYSE'),
	('SYY','NYSE'),
	('T','NYSE'),
	('TAL','NYSE'),
	('TAP','NYSE'),
	('TDG','NYSE'),
	('TDOC','NYSE'),
	('TEF','NYSE'),
	('TEO','NYSE'),
	('TEVA','NYSE'),
	('TFC','NYSE'),
	('TFX','NYSE'),
	('TGT','NYSE'),
	('THC','NYSE'),
	('THG','NYSE'),
	('THO','NYSE'),
	('THS','NYSE'),
	('TIF','NYSE'),
	('TJX','NYSE'),
	('TM','NYSE'),
	('TME','NYSE'),
	('TMHC','NYSE'),
	('TMO','NYSE'),
	('TOL','NYSE'),
	('TPC','NYSE'),
	('TPH','NYSE'),
	('TPR','NYSE'),
	('TPX','NYSE'),
	('TREX','NYSE'),
	('TRGP','NYSE'),
	('TRU','NYSE'),
	('TRV','NYSE'),
	('TSN','NYSE'),
	('TT','NYSE'),
	('TTM','NYSE'),
	('TV','NYSE'),
	('TWLO','NYSE'),
	('TWTR','NYSE'),
	('TX','NYSE'),
	('TXT','NYSE'),
	('U','NYSE'),
	('UA','NYSE'),
	('UBER','NYSE'),
	('UDR','NYSE'),
	('UGI','NYSE'),
	('UHS','NYSE'),
	('UNFI','NYSE'),
	('UNH','NYSE'),
	('UNM','NYSE'),
	('UNP','NYSE'),
	('UPS','NYSE'),
	('URI','NYSE'),
	('USB','NYSE'),
	('USFD','NYSE'),
	('V','NYSE'),
	('VAC','NYSE'),
	('VALE','NYSE'),
	('VAR','NYSE'),
	('VEEV','NYSE'),
	('VFC','NYSE'),
	('VIPS','NYSE'),
	('VLO','NYSE'),
	('VMC','NYSE'),
	('VMW','NYSE'),
	('VNO','NYSE'),
	('VSLR','NYSE'),
	('VST','NYSE'),
	('VSTO','NYSE'),
	('VTR','NYSE'),
	('VZ','NYSE'),
	('W','NYSE'),
	('WAB','NYSE'),
	('WAT','NYSE'),
	('WBT','NYSE'),
	('WCC','NYSE'),
	('WEC','NYSE'),
	('WELL','NYSE'),
	('WFC','NYSE'),
	('WGO','NYSE'),
	('WHR','NYSE'),
	('NET','NYSE')
;

INSERT IGNORE INTO strategies 
	(name, version, type)
VALUES
	('S01_RSI_OverSold', '1.0', 'Mean Reversion');

# Initial values for schedule
INSERT INTO backtest_schedules
	(strategy_id, from_date, timeframe)
SELECT 1, '2020-04-01', '5m' FROM DUAL
WHERE NOT EXISTS (SELECT * FROM backtest_schedules);



# Focus 1 -> id_list = 1
INSERT IGNORE INTO stock_list 
	(stock_id, list_id)
VALUES
	(1, 1),(75, 1),(4, 1),(43, 1),(268, 1),(408, 1),(6, 1),(78, 1),(446, 1),(72, 1),(168, 1),(469, 1),(190, 1),(498, 1),(499, 1),(135, 1),(64, 1),(109, 1),(254, 1),(504, 1),(21, 1),(511, 1),(513, 1),(521, 1),(524, 1),(525, 1),(47, 1),(534, 1),(543, 1),(52, 1),(57, 1),(59, 1),(573, 1),(576, 1),(578, 1),(302, 1),(591, 1),(595, 1),(609, 1),(610, 1),(614, 1),(617, 1),(628, 1),(652, 1),(656, 1),(284, 1),(661, 1),(663, 1),(667, 1),(300, 1),(701, 1),(707, 1),(717, 1),(114, 1),(209, 1),(267, 1),(24, 1),(295, 1),(39, 1),(757, 1),(129, 1),(780, 1),(197, 1),(781, 1),(787, 1),(104, 1),(214, 1),(16, 1),(796, 1),(94, 1),(804, 1),(816, 1),(41, 1),(827, 1),(832, 1),(834, 1),(311, 1),(207, 1),(296, 1),(9, 1),(35, 1),(233, 1),(868, 1),(26, 1),(883, 1),(22, 1),(888, 1),(897, 1),(143, 1),(902, 1),(913, 1),(915, 1),(29, 1),(924, 1),(100, 1),(952, 1),(962, 1),(963, 1),(968, 1),(3, 1),(138, 1),(976, 1),(977, 1),(990, 1),(308, 1),(998, 1),(1010, 1);


# Focus 2 -> id_list = 2
INSERT IGNORE INTO stock_list 
	(stock_id, list_id)
VALUES
	(339, 2),(251, 2),(343, 2),(344, 2),(285, 2),(346, 2),(348, 2),(350, 2),(351, 2),(69, 2),(91, 2),(148, 2),(359, 2),(360, 2),(364, 2),(365, 2),(371, 2),(380, 2),(383, 2),(212, 2),(126, 2),(400, 2),(414, 2),(420, 2),(424, 2),(107, 2),(426, 2),(293, 2),(78, 2),(437, 2),(159, 2),(321, 2),(95, 2),(177, 2),(498, 2),(298, 2),(254, 2),(500, 2),(519, 2),(188, 2),(526, 2),(118, 2),(199, 2),(531, 2),(533, 2),(535, 2),(543, 2),(309, 2),(548, 2),(566, 2),(567, 2),(111, 2),(222, 2),(302, 2),(592, 2),(605, 2),(145, 2),(245, 2),(272, 2),(173, 2),(165, 2),(640, 2),(284, 2),(658, 2),(185, 2),(667, 2),(668, 2),(688, 2),(164, 2),(249, 2),(711, 2),(247, 2),(114, 2),(34, 2),(725, 2),(292, 2),(128, 2),(738, 2),(101, 2),(750, 2),(7, 2),(758, 2),(760, 2),(13, 2),(81, 2),(775, 2),(1020, 2),(790, 2),(242, 2),(232, 2),(228, 2),(157, 2),(815, 2),(130, 2),(824, 2),(48, 2),(826, 2),(312, 2),(66, 2),(835, 2),(837, 2),(849, 2),(42, 2),(189, 2),(854, 2),(856, 2),(867, 2),(868, 2),(108, 2),(884, 2),(901, 2),(903, 2),(914, 2),(922, 2),(923, 2),(928, 2),(940, 2),(941, 2),(324, 2),(945, 2),(946, 2),(127, 2),(323, 2),(54, 2),(221, 2),(970, 2),(973, 2),(976, 2),(55, 2),(5, 2),(982, 2),(178, 2),(987, 2),(993, 2),(308, 2),(227, 2);